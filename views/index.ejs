<%- include("partials/_head") %>
    <% if (login) {%>
<!--Menu superior ADMINISTRADORES--> <% if (rol == 2) {%>

</head>
<body>
    
    <section class="bienvenidos">
        <%- include("partials/_header_logged_admin") %>

        <div class="welcomers text-center">
            <% if (sexo) { %>
           
                <h5 id="welcomers" class=" wow bounceIn">Bienvenida </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>

            <% }else{ %>

                <h5 id="welcomers" class=" wow bounceIn">Bienvenido </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>

           <% } %>
        </div>    
        <div class="estadisticas">

            <table id="estadisticas" class="principal-table table-striped">
                <thead class="first-table">
                    <th>Contratos Registrados</th>
                    <th>Contratos Instalados</th>
                    <th>Contratos Finalizados</th>
                    <th>Contratos Pendientes</th>
                </thead>
                <tbody class="first-table">
                    <td><%=contratos[0].length %></td>
                    <% let instalados = contratos[0].filter(status => status.estatus_ == 1) %>
                    <td><%= instalados.length%></td>
                    <% let finalizados = contratos[0].filter(status => status.estatus_ == 2) %>
                    <td><%= finalizados.length %></td>
                    <% let agendados = contratos[0].filter(status => status.estatus_ == 0) %>
                    <td><%= agendados.length %></td>
                </tbody>
            </table>

            <table id="estadisticas_2" class="principal-table table-striped">
                <thead class="first-table">
                    <th>Contratos Instalados Servitel</th>
                    <th>Contratos Pendientes Servitel</th>
                    <th>Contratos Instalados Hetelca</th>
                    <th>Contratos Pendientes Hetelca</th>
                </thead>
                <tbody class="first-table">
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tbody>
            </table>
        </div>
        </section>
        <section class="contratos">
        <div class="contratos_firstview">
            <h6 id="filtro-titulo" class="titulos"> FILTROS</h6>
          <div class="formularios rounded"> 
            <form action="" class="form-limiter form-inline rounded-top">
            <div class="form-group mx-sm-3">
            <label for="cantidad" class="titulos">Separador de páginas</label>
                <select name="cantidad" id="can" >
                <option value="">*</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
            

            <select name="página" id="pag">
                <option value="1">página 1</option>
                <option value="2">página 2</option>
                <option value="3">página 3</option>
                <option value="4">página 4</option>
                <option value="5">página 5</option>
            </select>
            </div>
            </form>

            <form action="" method="POST" class="form-filter rounded-bottom">
                <div class="form-group mx-sm-3">
                <label for='desde_fecha' class="titulos">Filtro de Búsqueda</label>
                <input type="Date" name="desde_fecha" id="">
                <input type="Date" name="hasta_fecha" id="">
                <input type="text" name="id_contrato" placeholder="Id contrato" id="id_contrato">
                <select type="" name="estatus_" id=""> 
                    <option value="">Seleccione Status</option>
                    <option value="0">Agendado</option>
                    <option value="1">Instalado</option>
                    <option value="2">Finalizado</option>
                    </select>
                <select type="text" name="empresa_contratista" id="">
                    <option value="">Seleccione Contratista</option>
                    <option value="0">Hetelca</option>
                    <option value="1">Servitel</option>
                </select>
                </div>
                <div class="form-group mx-sm-3">
                <input type="text" name="instalador" placeholder="Instalador" id="">
                <input type="text" name="nodo" placeholder="nodo" id="">
                <input type="submit" name="" id="btn" >
                </div>
            </form>
        </div> 
            <table id="lista-contratos" class="principal-table table-striped">
                <thead> 
                    <tr>
                        <th>#</th>
                        <th>Fecha contrato</th>
                        <th>ID de la ONT</th>
                        <th>Status</th>
                        <th>Empresa Contratista</th>
                    </tr>
                </thead>
                <% if (contratos[0] != undefined) {%>
                <tbody id="contratos">
                <% for (let index = 0; index < contratos[0].length; index++) { %>
                    <tr id="tr<%=index %>"  >
                        <td><%=index+1 %> </td>
                        <td  id="fecha"><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].fecha_contrato %></a></td>
                        <td id="id"><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].id %></a></td>
                        <% if (contratos[0][index].estatus_ == 0){%>
                            <td>Agendado</td>
                            <% }else if (contratos[0][index].estatus_ == 1){ %>
                                <td>Instalado</td>
                            <% }else if(contratos[0][index].estatus_ == 2){ %>
                                <td>Finalizado</td>
                            <% } %>
                        <% if (contratos[0][index].empresa_contratista == 0){%>
                            <td>Hetelca</td>
                            <% }else{ %>
                            <td>Servitel</td>
                            <% } %>
                    </tr> 
                <% } %>
                </tbody>
            </table>
          </div>
        <% }else{ %>
        <tbody>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr> 
        <% } %>
        </tbody>
    </table>
  </div>


    </section>



    <% }else if (rol == 1 ){%>
        <!--Menu superior ADMINISTRADORES CONTRATISTAS--> 
        
    </head>
    <body>
        
        <section class="bienvenidos">
            <%- include("partials/_header_logged_admin") %>
    
            <div class="welcomers text-center">
                <% if (sexo) { %>
               
                    <h5 id="welcomers" class=" wow bounceIn">Bienvenida </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>
    
                <% }else{ %>
    
                    <h5 id="welcomers" class=" wow bounceIn">Bienvenido </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>
    
               <% } %>
            </div>
            <div class="estadisticas">

                <table id="estadisticas" class="principal-table table-striped">
                    <thead>
                        <th>Contratos Registrados</th>
                        <th>Contratos Instalados</th>
                        <th>Contratos Finalizados</th>
                        <th>Contratos Pendientes</th>
                    </thead>
                    <tbody>
                        <td><%=contratos[0].length %></td>
                        <% let instalados = contratos[0].filter(status => status.estatus_ == 1) %>
                        <td><%= instalados.length%></td>
                        <% let finalizados = contratos[0].filter(status => status.estatus_ == 2) %>
                        <td><%= finalizados.length %></td>
                        <% let agendados = contratos[0].filter(status => status.estatus_ == 0) %>
                        <td><%= agendados.length %></td>
                    </tbody>
                </table>
    
                <table id="estadisticas_2" class="principal-table table-striped">
                    <thead>
                        <th>Contratos Instalados Servitel</th>
                        <th>Contratos Pendientes Servitel</th>
                        <th>Contratos Instalados Hetelca</th>
                        <th>Contratos Pendientes Hetelca</th>
                    </thead>
                    <tbody>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tbody>
                </table>
            </div>
            <div class="contratos_firstview">
                <h6 id="welcomers"> CONTRATOS </h6>
                <form action="">
                    <select name="cantidad" id="can">
                    <option value="">*</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
                <select name="página" id="pag">
                    <option value="1">página 1</option>
                    <option value="2">página 2</option>
                    <option value="3">página 3</option>
                    <option value="4">página 4</option>
                    <option value="5">página 5</option>
                </select>
                </form>
                <form action="" method="POST">
                    <input type="Date" name="desde_fecha" id="">
                    <input type="Date" name="hasta_fecha" id="">
                    <input type="text" name="id_contrato" placeholder="Id contrato" id="id_contrato">
                    <select type="" name="estatus_" id=""> 
                        <option value="">Seleccione Status</option>
                        <option value="0">Agendado</option>
                        <option value="1">Instalado</option>
                        <option value="2">Finalizado</option>
                        </select>
                    <input type="text" name="instalador" placeholder="Instalador" id="">
                    <input type="text" name="nodo" placeholder="nodo" id="">
                    <input type="submit" name="" id="">
                </form>
                <table id="lista-contratos" class="principal-table table-striped">
                    <thead> 
                        <tr>
                            <th>#</th>
                            <th>Fecha contrato</th>
                            <th>ID del contrato</th>
                            <th>Status</th>
                            <th>empresa contratista</th>
                        </tr>
                    </thead>
                    <% if (contratos[0] != undefined) {%>
                    <tbody id="contratos">
                    <% for (let index = 0; index < contratos[0].length; index++) { %>
                        <tr id="tr<%=index %>">
                            <td><%=index+1 %> </td>
                            <td><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].fecha_contrato %></a></td>
                            <td><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].id %></a></td>
                            <% if (contratos[0][index].estatus_ == 0){%>
                                <td>Agendado</td>
                                <% }else if (contratos[0][index].estatus_ == 1){ %>
                                    <td>Instalado</td>
                                <% }else if(contratos[0][index].estatus_ == 2){ %>
                                    <td>Finalizado</td>
                                <% } %>
                            <% if (contratos[0][index].empresa_contratista == 0){%>
                                <td>Hetelca</td>
                                <% }else{ %>
                                <td>Servitel</td>
                                <% } %>
                        </tr> 
                    <% } %>
                    </tbody>
                </table>
              </div>
            <% }else{ %>
            <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr> 
            <% } %>
            </tbody>
        </table>
      </div>
    
    
        </section>


 <!--Menu superior CONTRATISTAS--><% }else{ %>
        <!-- vista del contratista -->


</head>
 <body>
     
    <section class="bienvenidos">
            <%- include("partials/_header_logged_contratistas") %>

            <div class="welcomers text-center">
                <% if (sexo) { %>
           
                   <h5 id="welcomers" class=" wow bounceIn">Bienvenida </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>

               <% }else{ %>

                   <h5 id="welcomers" class=" wow bounceIn">Bienvenido </h5> <h5 class="nombre_contrat wow bounceIn"> <%=name %> </h5>

              <% } %>
              </div>
              <div class="contratos_firstview">
                <h6 id="welcomers"> CONTRATOS <% if (estatus == 1) {%> PENDIENTES <% }else if(estatus == 2){%> EMITIDOS <% }else{ %>  <% } %></h6>
                <form action="" method="POST">
                    <input type="Date" name="desde_fecha" id="">
                    <input type="Date" name="hasta_fecha" id="">
                    <input type="text" name="id_contrato" placeholder="Id contrato" id="id_contrato">
                    <select type="" name="estatus_" id=""> 
                        <option value="">Seleccione Status</option>
                        <option value="0">Agendado</option>
                        <option value="1">Instalado</option>
                        <option value="2">Finalizado</option>
                        </select>
                    <input type="text" name="nodo" placeholder="nodo" id="">
                    <input type="submit" name="" id="">
                </form>
                <table id="lista-contratos" class="principal-table table-striped">
                    <thead> 
                        <tr>
                            <th>Fecha contrato</th>
                            <th>ID del contrato</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <% if (contratos[0] != undefined) {%>
                    <tbody>
                    <% for (let index = 0; index < contratos[0].length; index++) { %>
                        <tr >
                            <td><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].fecha_contrato %></a></td>
                            <td><a href="/contratos/<%=contratos[0][index].id %>"><%=contratos[0][index].id %></a></td>
                            <% if (contratos[0][index].estatus_ == 0){%>
                                <td>Agendado</td>
                                <% }else if (contratos[0][index].estatus_ == 1){ %>
                                    <td>Instalado</td>
                                <% }else if(contratos[0][index].estatus_ == 2){ %>
                                    <td>Finalizado</td>
                                <% } %>
                        </tr> 
                    <% } %>
                    </tbody>
                </table>
              </div>
            <% }else{ %>
            <tbody>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr> 
            <% } %>
            </tbody>
        </table>
      </div>


                <% } %>

        </section>
<!--Menu superior--><% }else { %>

    <!-- vista del administrador -->
            </head>
            <body>
              
                <section class="bienvenidos">
                    <%- include("partials/_header") %>
                </section>
                    <% } %>

                    <section class="boton-de-subir">
            
                    <button type= 'button' id='' class="boton-subir btn btn-secondary btn-sm">subir</button>
                </section>


    <%- include("partials/_footer") %>

    <!--Carga de archivos js-->
    <script src="/styles/scriptindex.js"></script>
    <script src="contratistas-styles/js/jquery-1.9.1.min.js"></script>
    <script src="contratistas-styles/js/bootstrap.min.js"></script>
    <script src="contratistas-styles/js/owl.carousel.min.js"></script>
    <script type="text/javascript">


       
    </script>
    <script src="contratistas-styles/js/wow.min.js"></script>
    <script src="contratistas-styles/js/smooth-scroll.min.js"></script>
    <script src="contratistas-styles/js/sitio.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script type="text/javascript">
    

      
        
    </script>
</body>

</html>